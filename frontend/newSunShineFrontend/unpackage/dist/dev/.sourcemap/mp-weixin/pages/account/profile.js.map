{"version":3,"file":"profile.js","sources":["pages/account/profile.vue","../../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYWNjb3VudC9wcm9maWxlLnZ1ZQ"],"sourcesContent":["<template>\r\n  <view class=\"profile-container\">\r\n    <view class=\"profile-header\">\r\n      <text class=\"profile-title\">‰∏™‰∫∫‰∏≠ÂøÉ</text>\r\n    </view>\r\n    \r\n    <view class=\"user-info\" v-if=\"userInfo\">\r\n      <view class=\"avatar-section\">\r\n        <image \r\n          v-if=\"userInfo.avatar_url\" \r\n          :src=\"userInfo.avatar_url\" \r\n          class=\"avatar-image\"\r\n          mode=\"aspectFill\"\r\n        />\r\n        <text v-else class=\"avatar\">üë§</text>\r\n        <text class=\"username\">{{ userInfo.nickname || userInfo.username }}</text>\r\n        <text class=\"role\">{{ userInfo.role === 'admin' ? 'ÁÆ°ÁêÜÂëò' : 'ÊôÆÈÄöÁî®Êà∑' }}</text>\r\n      </view>\r\n      \r\n      <view class=\"info-list\">\r\n        <view class=\"info-item\">\r\n          <text class=\"info-label\">Áî®Êà∑IDÔºö</text>\r\n          <text class=\"info-value\">{{ userInfo.id }}</text>\r\n        </view>\r\n        <view class=\"info-item\">\r\n          <text class=\"info-label\">Áî®Êà∑ÂêçÔºö</text>\r\n          <text class=\"info-value\">{{ userInfo.username }}</text>\r\n        </view>\r\n        <view class=\"info-item\" v-if=\"userInfo.nickname\">\r\n          <text class=\"info-label\">ÂæÆ‰ø°ÊòµÁß∞Ôºö</text>\r\n          <text class=\"info-value\">{{ userInfo.nickname }}</text>\r\n        </view>\r\n        <view class=\"info-item\">\r\n          <text class=\"info-label\">Ê≥®ÂÜåÊó∂Èó¥Ôºö</text>\r\n          <text class=\"info-value\">{{ formatDate(userInfo.created_at) }}</text>\r\n        </view>\r\n        <view class=\"info-item\">\r\n          <text class=\"info-label\">ÊÄßÂà´Ôºö</text>\r\n          <text class=\"info-value\">{{ userInfo.gender === 1 ? 'Áî∑' : 'Â•≥' }}</text>\r\n        </view>\r\n        <view class=\"info-item\">\r\n          <text class=\"info-label\">ÂõΩÂÆ∂Ôºö</text>\r\n          <text class=\"info-value\">{{ userInfo.country }}</text>\r\n        </view>\r\n        <view class=\"info-item\">\r\n          <text class=\"info-label\">ÁúÅ‰ªΩÔºö</text>\r\n          <text class=\"info-value\">{{ userInfo.province }}</text>\r\n        </view>\r\n        <view class=\"info-item\">\r\n          <text class=\"info-label\">ÂüéÂ∏ÇÔºö</text>\r\n          <text class=\"info-value\">{{ userInfo.city }}</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    \r\n    <view class=\"login-prompt\" v-else>\r\n      <text class=\"prompt-text\">ËØ∑ÂÖàÁôªÂΩï</text>\r\n      <button @click=\"goToLogin\" class=\"login-btn\">Á´ãÂç≥ÁôªÂΩï</button>\r\n    </view>\r\n    \r\n    <view class=\"action-buttons\" v-if=\"userInfo\">\r\n      <button @click=\"logout\" class=\"logout-btn\">ÈÄÄÂá∫ÁôªÂΩï</button>\r\n      <button @click=\"testBackend\" class=\"test-btn\">ÊµãËØïÂêéÁ´ØËøûÊé•</button>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      userInfo: null\r\n    };\r\n  },\r\n  onLoad() {\r\n    this.loadUserInfo();\r\n  },\r\n  onShow() {\r\n    // ÊØèÊ¨°È°µÈù¢ÊòæÁ§∫Êó∂ÈÉΩÈáçÊñ∞Âä†ËΩΩÁî®Êà∑‰ø°ÊÅØ\r\n    this.loadUserInfo();\r\n  },\r\n  methods: {\r\n    loadUserInfo() {\r\n      const userInfo = uni.getStorageSync('userInfo');\r\n      console.log('Âä†ËΩΩÁî®Êà∑‰ø°ÊÅØ:', userInfo);\r\n      if (userInfo) {\r\n        this.userInfo = userInfo;\r\n      } else {\r\n        this.userInfo = null;\r\n      }\r\n    },\r\n    \r\n    formatDate(dateString) {\r\n      if (!dateString) return 'Êú™Áü•';\r\n      const date = new Date(dateString);\r\n      return date.toLocaleDateString('zh-CN');\r\n    },\r\n    \r\n    goToLogin() {\r\n      uni.navigateTo({\r\n        url: '/pages/account/login'\r\n      });\r\n    },\r\n    \r\n    logout() {\r\n      uni.showModal({\r\n        title: 'Á°ÆËÆ§ÈÄÄÂá∫',\r\n        content: 'Á°ÆÂÆöË¶ÅÈÄÄÂá∫ÁôªÂΩïÂêóÔºü',\r\n        success: (res) => {\r\n          if (res.confirm) {\r\n            uni.removeStorageSync('token');\r\n            uni.removeStorageSync('userInfo');\r\n            this.userInfo = null;\r\n            uni.showToast({ title: 'Â∑≤ÈÄÄÂá∫ÁôªÂΩï', icon: 'success' });\r\n          }\r\n        }\r\n      });\r\n    },\r\n    \r\n    async testBackend() {\r\n      try {\r\n        uni.showLoading({ title: 'ÊµãËØïËøûÊé•‰∏≠...' });\r\n        \r\n        // const res = await uni.request({\r\n        //   url: 'http://192.168.1.17:3000/health',\r\n        //   method: 'GET'\r\n        // });\r\n        const res = await this.$api.health()\r\n        uni.hideLoading();\r\n        \r\n        console.log('ÂêéÁ´ØËøûÊé•ÂìçÂ∫î:', res);\r\n        \r\n        // Ê£ÄÊü•ÂìçÂ∫îÁªìÊûÑ\r\n        const response = res[1] || res;\r\n        console.log('Â§ÑÁêÜÂêéÁöÑÂìçÂ∫î:', response);\r\n        \r\n        if (response && response.statusCode === 200) {\r\n          uni.showToast({ \r\n            title: 'ÂêéÁ´ØËøûÊé•Ê≠£Â∏∏', \r\n            icon: 'success' \r\n          });\r\n          console.log('ÂêéÁ´ØÂìçÂ∫î:', response.data);\r\n        } else {\r\n          uni.showToast({ \r\n            title: 'ÂêéÁ´ØËøûÊé•ÂºÇÂ∏∏', \r\n            icon: 'none' \r\n          });\r\n        }\r\n      } catch (error) {\r\n        uni.hideLoading();\r\n        uni.showToast({ \r\n          title: 'ËøûÊé•Â§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÂêéÁ´ØÊúçÂä°', \r\n          icon: 'none' \r\n        });\r\n        console.error('ËøûÊé•ÈîôËØØ:', error);\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.profile-container {\r\n  padding: 40rpx;\r\n  min-height: 100vh;\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.profile-header {\r\n  text-align: center;\r\n  margin-bottom: 60rpx;\r\n}\r\n\r\n.profile-title {\r\n  font-size: 48rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.user-info {\r\n  background: white;\r\n  border-radius: 20rpx;\r\n  padding: 40rpx;\r\n  margin-bottom: 40rpx;\r\n  box-shadow: 0 4rpx 20rpx rgba(0,0,0,0.1);\r\n}\r\n\r\n.avatar-section {\r\n  text-align: center;\r\n  margin-bottom: 40rpx;\r\n}\r\n\r\n.avatar {\r\n  font-size: 120rpx;\r\n  display: block;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.avatar-image {\r\n  width: 120rpx;\r\n  height: 120rpx;\r\n  border-radius: 50%;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.username {\r\n  font-size: 36rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n  display: block;\r\n  margin-bottom: 10rpx;\r\n}\r\n\r\n.role {\r\n  font-size: 24rpx;\r\n  color: #666;\r\n  background: #f0f0f0;\r\n  padding: 10rpx 20rpx;\r\n  border-radius: 20rpx;\r\n}\r\n\r\n.info-list {\r\n  border-top: 2rpx solid #f0f0f0;\r\n  padding-top: 30rpx;\r\n}\r\n\r\n.info-item {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.info-label {\r\n  font-size: 28rpx;\r\n  color: #666;\r\n}\r\n\r\n.info-value {\r\n  font-size: 28rpx;\r\n  color: #333;\r\n  font-weight: 500;\r\n}\r\n\r\n.login-prompt {\r\n  background: white;\r\n  border-radius: 20rpx;\r\n  padding: 60rpx 40rpx;\r\n  text-align: center;\r\n  margin-bottom: 40rpx;\r\n}\r\n\r\n.prompt-text {\r\n  font-size: 32rpx;\r\n  color: #666;\r\n  display: block;\r\n  margin-bottom: 40rpx;\r\n}\r\n\r\n.login-btn {\r\n  background: #3cc51f;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 10rpx;\r\n  padding: 20rpx 40rpx;\r\n  font-size: 28rpx;\r\n}\r\n\r\n.action-buttons {\r\n  display: flex;\r\n  gap: 20rpx;\r\n}\r\n\r\n.logout-btn, .test-btn {\r\n  flex: 1;\r\n  height: 80rpx;\r\n  border: none;\r\n  border-radius: 10rpx;\r\n  font-size: 28rpx;\r\n  font-weight: bold;\r\n}\r\n\r\n.logout-btn {\r\n  background: #e74c3c;\r\n  color: white;\r\n}\r\n\r\n.test-btn {\r\n  background: #3498db;\r\n  color: white;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/newSunShinestore/frontend/newSunShineFrontend/pages/account/profile.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AAoEA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,UAAU;AAAA;EAEb;AAAA,EACD,SAAS;AACP,SAAK,aAAY;AAAA,EAClB;AAAA,EACD,SAAS;AAEP,SAAK,aAAY;AAAA,EAClB;AAAA,EACD,SAAS;AAAA,IACP,eAAe;AACb,YAAM,WAAWA,cAAAA,MAAI,eAAe,UAAU;AAC9CA,oBAAY,MAAA,MAAA,OAAA,mCAAA,WAAW,QAAQ;AAC/B,UAAI,UAAU;AACZ,aAAK,WAAW;AAAA,aACX;AACL,aAAK,WAAW;AAAA,MAClB;AAAA,IACD;AAAA,IAED,WAAW,YAAY;AACrB,UAAI,CAAC;AAAY,eAAO;AACxB,YAAM,OAAO,IAAI,KAAK,UAAU;AAChC,aAAO,KAAK,mBAAmB,OAAO;AAAA,IACvC;AAAA,IAED,YAAY;AACVA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,MACP,CAAC;AAAA,IACF;AAAA,IAED,SAAS;AACPA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AAChB,cAAI,IAAI,SAAS;AACfA,gCAAI,kBAAkB,OAAO;AAC7BA,gCAAI,kBAAkB,UAAU;AAChC,iBAAK,WAAW;AAChBA,0BAAG,MAAC,UAAU,EAAE,OAAO,SAAS,MAAM,UAAQ,CAAG;AAAA,UACnD;AAAA,QACF;AAAA,MACF,CAAC;AAAA,IACF;AAAA,IAED,MAAM,cAAc;AAClB,UAAI;AACFA,sBAAAA,MAAI,YAAY,EAAE,OAAO,WAAY,CAAA;AAMrC,cAAM,MAAM,MAAM,KAAK,KAAK,OAAO;AACnCA,sBAAG,MAAC,YAAW;AAEfA,sBAAA,MAAA,MAAA,OAAA,oCAAY,WAAW,GAAG;AAG1B,cAAM,WAAW,IAAI,CAAC,KAAK;AAC3BA,sBAAA,MAAA,MAAA,OAAA,oCAAY,WAAW,QAAQ;AAE/B,YAAI,YAAY,SAAS,eAAe,KAAK;AAC3CA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,UACR,CAAC;AACDA,+EAAY,SAAS,SAAS,IAAI;AAAA,eAC7B;AACLA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,UACR,CAAC;AAAA,QACH;AAAA,MACA,SAAO,OAAO;AACdA,sBAAG,MAAC,YAAW;AACfA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QACR,CAAC;AACDA,sBAAA,MAAA,MAAA,SAAA,oCAAc,SAAS,KAAK;AAAA,MAC9B;AAAA,IACF;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7JA,GAAG,WAAW,eAAe;"}